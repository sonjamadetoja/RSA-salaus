import time
import numpy as np
from keycreationmachine import KeyCreationMachine
from message_processing import MessageProcessing


KCM = KeyCreationMachine()
MP = MessageProcessing()

key_generation = []
encryption = []
decryption = []

for _ in range(100):
    startTime = time.time()
    KCM.generate_key_pair()
    whole_time = time.time() - startTime
    key_generation.append(whole_time)
avg_kg = np.mean(key_generation)
key_generation.append(avg_kg)
print("Key generation, average: ", avg_kg)

TEST_MESSAGE = """Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor
 incididunt ut labore et dolore magna aliqua. Aenean euismod elementum nisi quis eleifend quam adipiscing vitae
 proin. Nulla porttitor massa id neque aliquam vestibulum morbi bla"""

for _ in range(100):
    startTime = time.time()
    enc = MP.encrypt_message(TEST_MESSAGE, 65537, 1402780362413188378782815126410368555009900613011620790482844247434439130044662477396197679256522383768030210217764639207272693312264464954697278774837602048488715203683210224924460040606973359453443899870135512745966378233072708275009243278290271539786399793829470389534096128138561160401271706190100163447062697757411521979951326014422643855332194205350997970442710463421201270199261495893683148838502495761532681056041323055277008080706065323994907640440801146336958738529794593997532146276542045056570130814357683673617571185580160390334192897912965127410396978704953870370320223292465157632706716082140253880964311)
    whole_time = time.time() - startTime
    encryption.append(whole_time)
avg_enc = np.mean(encryption)
encryption.append(avg_enc)
print("Encryption, average: ", avg_enc)

for _ in range(100):
    startTime = time.time()
    dec = MP.decrypt_message(enc, 65537, 270359014871614239473972532488355665018692565160898152258858441633648178152709641149142818357403210848436601999795308876315079866750270180856330442421437531081083384007852485634387518087594496288454611887325963371748803324258684074975078991227618289196057430090789027422756125463755832842950744173324307864255592244253354559883911211839127009221459450677740352811211184922747688911109565459386844309063471195160082598161438106626959240234104133550669656168862031853290974419220114242939567305664243662943255857817596181448500773345806146102334831196560237680258952134159099801207062104083813745787016823205951093084289)
    whole_time = time.time() - startTime
    decryption.append(whole_time)
avg_dec = np.mean(decryption)
decryption.append(avg_dec)
print("Decryption, average: ", avg_dec)
